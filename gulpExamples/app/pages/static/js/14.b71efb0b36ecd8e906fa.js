webpackJsonp([14],{"0xDb":function(e,n,t){"use strict";function i(e){if(null===e)return"";var n=e.split("T"),t=n[0],i=t.split("-"),o=n[1],a=o.split(".000"),r=a[0].split(":"),l=parseInt(i[0])+"/"+parseInt(i[1])+"/"+parseInt(i[2])+" "+parseInt(r[0])+":"+parseInt(r[1])+":"+parseInt(r[2]),u=new Date(Date.parse(l));return u.setTime(u.setHours(u.getHours()+8)),u.getFullYear()+"-"+(u.getMonth()+1<10?"0"+(u.getMonth()+1):u.getMonth()+1)+"-"+(u.getDate()<10?"0"+u.getDate():u.getDate())+" "+(u.getHours()<10?"0"+u.getHours():u.getHours())+":"+(u.getMinutes()<10?"0"+u.getMinutes():u.getMinutes())+":"+(u.getSeconds()<10?"0"+u.getSeconds():u.getSeconds())}function o(e,n,t){var i=void 0,o=void 0,a=void 0,r=void 0,l=void 0,u=function u(){var s=+new Date-r;s<n&&s>0?i=setTimeout(u,n-s):(i=null,t||(l=e.apply(a,o),i||(a=o=null)))};return function(){for(var o=arguments.length,s=Array(o),c=0;c<o;c++)s[c]=arguments[c];a=this,r=+new Date;var d=t&&!i;return i||(i=setTimeout(u,n)),d&&(l=e.apply(a,s),a=s=null),l}}n.b=i,n.a=o;var a=t("ZLEe"),r=(t.n(a),t("hRKE"));t.n(r)},"3cXf":function(e,n,t){e.exports={default:t("Bdoc"),__esModule:!0}},"6jzF":function(e,n,t){"use strict";var i=t("rYG7"),o=t("YC36"),a=t("1gzV"),r=t("jYDo"),l=t("W7ai"),u=t("F44o"),s=t("W9O9"),c=t("V2bY");o(o.S+o.F*!t("1KWh")(function(e){Array.from(e)}),"Array",{from:function(e){var n,t,o,d,f=a(e),m="function"==typeof this?this:Array,h=arguments.length,p=h>1?arguments[1]:void 0,g=void 0!==p,v=0,b=c(f);if(g&&(p=i(p,h>2?arguments[2]:void 0,2)),void 0==b||m==Array&&l(b))for(n=u(f.length),t=new m(n);n>v;v++)s(t,v,g?p(f[v],v):f[v]);else for(d=b.call(f),t=new m;!(o=d.next()).done;v++)s(t,v,g?r(d,p,[o.value,v],!0):o.value);return t.length=v,t}})},BWCr:function(e,n,t){"use strict";function i(e){if(!(this instanceof i))return new i(e,null,null)}var o=t("kfHR"),a=t.n(o),r=t("UFcW");i.treeToArray=function(e,n,t,o){var l=[];return a()(e).forEach(function(e){void 0===e._expanded&&r.default.set(e,"_expanded",o),n&&r.default.set(e,"_parent",n);var a=0;if(void 0!==t&&null!==t&&(a=t+1),r.default.set(e,"_level",a),l.push(e),e.children&&e.children.length>0){var u=i.treeToArray(e.children,e,a,o);l=l.concat(u)}}),l},n.a=i},Bdoc:function(e,n,t){var i=t("uedQ"),o=i.JSON||(i.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}},NNlA:function(e,n,t){var i=t("i8r9");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);t("XkoO")("2e9ef93a",i,!1)},Pu2f:function(e,n,t){function i(e){o||t("NNlA")}var o=!1,a=t("Alxp")(t("k+Ni"),t("Uygr"),i,"data-v-44bf78f7",null);a.options.__file="/Users/tiner/project/atkm/农业项目/web/web/src/views/admin/menu/treeTable/vue/TreeGrid.vue",a.esModule&&Object.keys(a.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),a.options.functional&&console.error("[vue-loader] TreeGrid.vue: functional components are not supported with templates, they should use render functions."),e.exports=a.exports},Uygr:function(e,n,t){e.exports={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"app-container"},[t("el-table",{ref:"homePage",staticStyle:{width:"100%"},attrs:{data:e.data,border:"",height:e.clientHeight,"row-style":e.showTr,fit:""}},[e._l(e.columns,function(n,i){return t("el-table-column",{key:n.dataIndex,attrs:{align:"center",width:n.maxWid,label:n.text},scopedSlots:e._u([{key:"default",fn:function(o){return[t("a",{attrs:{id:o.row.id}},[e._l(o.row._level,function(n,o){return e.spaceIconShow(i)?t("span",{key:o,staticClass:"ms-tree-space"}):e._e()}),e._v(" "),e.toggleIconShow(i,o.row)?t("span",{staticStyle:{display:"inline-block"},on:{click:function(n){e.toggle(o.$index)}}},[o.row._expanded?e._e():t("i",{staticClass:"el-icon-caret-right",attrs:{"aria-hidden":"true"}}),e._v(" "),o.row._expanded?t("i",{staticClass:"el-icon-caret-bottom",attrs:{"aria-hidden":"true"}}):e._e()]):0===i?t("span",{staticClass:"ms-tree-space"}):e._e(),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:"icon"==n.dataIndex,expression:"column.dataIndex=='icon'"}]},[t("i",{staticClass:"icon iconfont",class:o.row[n.dataIndex]})]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:"url"==n.dataIndex,expression:"column.dataIndex=='url'"}]},[t("span",{staticClass:"tabBox"},[e._v(e._s(o.row[n.dataIndex]))])]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:"icon"!=n.dataIndex&&"url"!=n.dataIndex,expression:"column.dataIndex!='icon' && column.dataIndex!='url'"}]},[e._v(e._s(o.row[n.dataIndex]))])],2)]}}])})}),e._v(" "),"normal"===e.treeType?t("el-table-column",{attrs:{align:"center",fixed:"right",label:"操作",width:"260"},scopedSlots:e._u([{key:"default",fn:function(n){return[t("button",{staticClass:"el-button el-button--default el-button--small",attrs:{type:"button"},on:{click:function(t){e.editMenu(n.row)}}},[e._v("编辑")]),e._v(" "),t("el-button",{attrs:{size:"small",type:"danger",disabled:0==n.row.parentId},on:{click:function(t){e.handleDelete(n.row.id,n.$index)}}},[e._v("删除")]),e._v(" "),"菜单"==n.row.type||"模块"==n.row.type?t("button",{staticClass:"el-button el-button--success el-button--small",attrs:{type:"button"},on:{click:function(t){e.addMenu(n.row,n.$index)}}},[e._v("添加子项")]):e._e()]}}])}):e._e()],2),e._v(" "),t("el-dialog",{attrs:{title:e.form.addMenu?"添加菜单":"编辑菜单",visible:e.dialogFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(n){e.dialogFormVisible=n}}},[t("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"编号","label-width":e.formLabelWidth,prop:"orders"}},[t("el-input",{model:{value:e.form.orders,callback:function(n){e.form.orders=n},expression:"form.orders"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"菜单名称","label-width":e.formLabelWidth,prop:"name"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.name,callback:function(n){e.form.name=n},expression:"form.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"图标","label-width":e.formLabelWidth,prop:"icon"}},[t("el-select",{attrs:{placeholder:"请选图标"},model:{value:e.form.icon,callback:function(n){e.form.icon=n},expression:"form.icon"}},e._l(e.options,function(e){return t("el-option",{key:e.index,attrs:{label:e,value:e}},[t("i",{class:"icon iconfont "+e})])}))],1),e._v(" "),t("el-form-item",{attrs:{label:"菜单类型","label-width":e.formLabelWidth,prop:"numType"}},[t("el-select",{attrs:{placeholder:"请选菜单类型"},model:{value:e.form.numType,callback:function(n){e.form.numType=n},expression:"form.numType"}},[t("el-option",{attrs:{label:"模块",value:"3"}}),e._v(" "),t("el-option",{attrs:{label:"菜单",value:"1"}}),e._v(" "),t("el-option",{attrs:{label:"按钮",value:"2"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"地址类型","label-width":e.formLabelWidth,prop:"urlType"}},[t("el-select",{attrs:{placeholder:"地址类型"},model:{value:e.form.urlType,callback:function(n){e.form.urlType=n},expression:"form.urlType"}},[t("el-option",{attrs:{label:"router",value:"router"}}),e._v(" "),t("el-option",{attrs:{label:"http",value:"http"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"菜单状态","label-width":e.formLabelWidth,prop:"numValid"}},[t("el-select",{attrs:{placeholder:"请选菜单状态"},model:{value:e.form.numValid,callback:function(n){e.form.numValid=n},expression:"form.numValid"}},[t("el-option",{attrs:{label:"有效",value:"0"}}),e._v(" "),t("el-option",{attrs:{label:"无效",value:"1"}})],1)],1),e._v(" "),t("el-form-item",{attrs:{label:"菜单地址","label-width":e.formLabelWidth,prop:"url"}},[t("el-input",{attrs:{"auto-complete":"off"},model:{value:e.form.url,callback:function(n){e.form.url=n},expression:"form.url"}})],1),e._v(" "),t("el-form-item",{attrs:{align:"center"}},[t("el-button",{on:{click:function(n){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),e.form.addMenu?t("el-button",{attrs:{type:"primary",disabled:e.statu},on:{click:function(n){e.confirmAdd("form")}}},[e._v("新增")]):t("el-button",{attrs:{type:"primary",disabled:!e.dialogFormVisible},on:{click:function(n){e.confirmMenu("form")}}},[e._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]},e.exports.render._withStripped=!0},"Vq+d":function(e,n,t){"use strict";function i(){return t.i(c.a)({url:s.b+"/menu/getTreeData",method:"get"})}function o(e,n){return t.i(c.a)({url:s.b+"/menu/deletes",method:"delete",data:u()(e)})}function a(e){return t.i(c.a)({url:s.b+"/menu/save",method:"post",data:e})}function r(e){return t.i(c.a)({url:s.b+"/menu/update/",method:"post",data:e})}n.d=i,n.c=o,n.a=a,n.b=r;var l=t("3cXf"),u=t.n(l),s=t("gyMJ"),c=t("Vo7i")},W9O9:function(e,n,t){"use strict";var i=t("MheT"),o=t("wHGh");e.exports=function(e,n,t){n in e?i.f(e,n,o(0,t)):e[n]=t}},"Wj+L":function(e,n,t){"use strict";var i=t("BWCr");n.a={MSDataTransfer:i.a}},i8r9:function(e,n,t){n=e.exports=t("YfG4")(!1),n.push([e.i,'\n.box[data-v-44bf78f7] {\n  width: 100%;\n}\n.app-container[data-v-44bf78f7] {\n  position: relative;\n}\n.add-parent[data-v-44bf78f7] {\n  position: absolute;\n  right: 59px;\n  top: 7px;\n  z-index: 4;\n}\n.add-parent button[data-v-44bf78f7] {\n  background-color: #13ce66;\n  color: #fff;\n}\n.ms-tree-space[data-v-44bf78f7] {\n  position: relative;\n  top: 1px;\n  display: inline-block;\n  font-family: "Glyphicons Halflings";\n  font-style: normal;\n  font-weight: 400;\n  line-height: 1;\n  width: 14px;\n  height: 14px;\n}\n.ms-tree-space[data-v-44bf78f7]::before {\n  content: "";\n}\ntable td[data-v-44bf78f7] {\n  line-height: 26px;\n}\n.el-table__fixed-right[data-v-44bf78f7] {\n  height: 100% !important;\n}\n.valid-color[data-v-44bf78f7] {\n  color: red;\n}\n.tabBox[data-v-44bf78f7] {\n  width: 100%;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n',""])},"k+Ni":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t("Vq+d"),o=t("Wj+L"),a=t("0xDb"),r=t("AQ8V");t.n(r);n.default={name:"tree-grid",props:{treeStructure:{type:Boolean,default:function(){return!1}},columns:{type:Array,default:function(){return[]}},dataSource:{type:Array,default:function(){return[]}},requestUrl:{type:String,default:function(){return""}},treeType:{type:String,default:function(){return"normal"}},defaultExpandAll:{type:Boolean,default:function(){return!0}}},data:function(){return{clientHeight:"",btnStatu:!1,maoDian:null,statu:!1,newData:!0,newState:!1,tableData:null,stateMenu:!0,dialogFormVisible:!1,menuScope:"",addScope:"",childArr:[],form:{addMenu:null,parentId:null,orders:null,name:null,icon:null,type:null,valid:null,iconType:null,urlType:null,numType:null,numValid:null,url:null,id:null},rules:{orders:[{validator:function(e,n,t){0==/^\d+$/.test(n)?t(new Error("编号只能输入数字")):t()},required:!0,trigger:"blur"}],name:[{required:!0,message:"请输入菜单名称，同级菜单不能重名",trigger:"blur"}],icon:[{required:!0,message:"请选择图标",trigger:"change"}],numType:[{required:!0,message:"请选菜单类型",trigger:"change"}],urlType:[{required:!0,message:"请选地址类型",trigger:"change"}],numValid:[{required:!0,message:"请选菜单状态",trigger:"change"}],url:[{required:!0,message:"请填写菜单地址",trigger:"blur"}]},formLabelWidth:"120px",options:["icon-dian","icon-gonggao","icon-daibanshixiang","icon-tupian","icon-bangongyongpinguanli","icon-bangongxitong","icon-bumenguanli","icon-beian","icon-caiwuguanli","icon-caiwu","icon-bianmaguize","icon-cheliangguanli","icon-danganhe","icon-cangku","icon-caozuoguizhangjiyuan","icon-dami","icon-tiaoduguanli","icon-gonggao1","icon-diliweizhi1","icon-gudingzichan-normal","icon-kaohe","icon-jiancharenwufenpei","icon-keji","icon-gongwenguanli","icon-jiaoseguanli","icon-fenxi","icon-kaoherenwujihua","icon-kaoqinguanli","icon-huiyiguanli-","icon-renwu","icon-qiyeguanli","icon-lunhuantuguanli","icon-qiyeguanli1","icon-lianjie","icon-shujufenxi","icon-shujuzidianguanli","icon-wenzhangguanli","icon-dongtaijiance","icon-huanbaozhuangxiu","icon-renwuguanli","icon-xiangmu","icon-liangyou","icon-mobanguanli","icon-shenpi1","icon-shenhetongguo","icon-hangzhengguanli","icon-wenjian","icon-touzijihuaguanli","icon-xiangmushenbao","icon-qiyexinxi","icon-tongji","icon-kaoqinguanli1","icon-zhishihudong","icon-yingjiyuan","icon-yusuanyuchengbenguanli","icon-zichanguanli","icon-yonghuguanli","icon-zhijiandan","icon-iconfonticon-baobia","icon-B--hangyetongji","icon-HRrenshirenshiguanli","icon-tupian1","icon-zichanguanli1","icon-rizhiguanli","icon-shouhui","icon-xinxidengji","icon-shujuzidianguanli1","icon-xitongguanli","icon-xinfengkai","icon-yewuguanli","icon-zhihuizhongxin","icon-zhuanducha","icon-yonghuguanli1","icon-caigoudingdan","icon-ico_caiwuguanli_yuanneishengdanchaxun","icon-zijinguanli","icon-gonggongfuwu","icon-qiyeguanli2","icon-zhengcexuanchuan","icon-chouchajiancha","icon-baobiao","icon-mokuai","icon-xinyongguanli-","icon-zuzhijiansheguanli-","icon-shougouzigerending-","icon-caiwutongji-","icon-dangwugongkai","icon-gangweipeixunguanli-","icon-dangwugongkai-","icon-chubeiku"]}},mounted:function(){this.clientHeight=""+(document.documentElement.clientHeight-160),window.onresize=function(){this.clientHeight=""+(document.documentElement.clientHeight-160)}},watch:{clientHeight:function(){this.changeFixed(this.clientHeight)}},computed:{data:{get:function(){var e=this;if(e.stateMenu){var n=o.a.MSDataTransfer.treeToArray(e.dataSource,null,null,e.defaultExpandAll);for(var t in n)1==n[t].type?n[t].type="菜单":2==n[t].type?n[t].type="按钮":3==n[t].type&&(n[t].type="模块"),0==n[t].valid?n[t].valid="有效":1==n[t].valid&&(n[t].valid="无效"),n[t].createTime?n[t].createTime=this.dateFormat(n[t].createTime):n[t].createTime="根节点";return e.tableData=n,n}if(e.newState){return o.a.MSDataTransfer.treeToArray(e.newData,null,null,e.defaultExpandAll)}return e.tableData},set:function(){var e=this;if(e.stateMenu){var n=o.a.MSDataTransfer.treeToArray(e.dataSource,null,null,e.defaultExpandAll);return e.tableData=n,n}if(e.newState){return o.a.MSDataTransfer.treeToArray(e.newData,null,null,e.defaultExpandAll)}return e.tableData}}},methods:{changeFixed:function(e){console.log(e),this.$refs.homePage.style.height=e-160+"px"},dateFormat:a.b,positionFn:function(e){var n=document.getElementById(e),t=n.offsetTop;return alert(window.scrollTop(0,t-36)),window.scrollTop(0,t-36)},sendMsg:function(){this.$emit("listenMsg",this.newData)},addMenu:function(e,n){this.maoDian=e.id,this.menuIndex=n,this.form.addMenu=!0,this.dialogFormVisible=!0,e?(this.form.parentId=e.id,this.form.orders=null,this.form.name=null,this.form.icon="icon-dian",this.form.type=null,this.form.valid=null,this.form.url=null,this.addScope=e):(this.form.parentId=null,this.form.orders=null,this.form.name=null,this.form.icon="icon-dian",this.form.type=null,this.form.valid=null,this.form.url=null)},confirmAdd:function(e){var n=this;this.data=1,"菜单"==this.form.numType||1==this.form.numType?this.form.type=1:"按钮"==this.form.numType||2==this.form.numType?this.form.type=2:"模块"!=this.form.numType&&3!=this.form.numType||(this.form.type=3),"有效"==this.form.numValid||0==this.form.numValid?this.form.valid=0:"无效"!=this.form.numValid&&1!=this.form.numValid||(this.form.valid=1),this.$refs[e].validate(function(e){e&&(n.statu=!0,t.i(i.a)(n.form).then(function(e){if(200==e.infoCode){n.$message({type:"success",message:"添加成功"}),n.sendMsg(),n.dialogFormVisible=!1,n.form.addMenu=null;var t=setTimeout(function(){n.positionFn(n.maoDian),clearInterval(t)},1e3)}else 204==e.infoCode&&n.$message({type:"info",message:"同级菜单名字不能相同"});n.statu=!1}))})},editMenu:function(e,n){this.form.addMenu=!1,this.scope=e,this.maoDian=e.id,this.menuIndex=n,this.dialogFormVisible=!0,this.form.orders=e.orders,this.form.name=e.name,this.form.icon=e.icon,this.form.numType=e.type,this.form.numValid=e.valid,this.form.urlType=e.urlType,this.form.url=e.url,this.form.parentId=e.parentId,this.form.id=e.id},confirmMenu:function(e){var n=this;"有效"==this.form.numValid||0==this.form.numValid?this.form.valid=0:"无效"!=this.form.numValid&&1!=this.form.numValid||(this.form.valid=1),"菜单"==this.form.numType||1==this.form.numType?this.form.type=1:"按钮"==this.form.numType||2==this.form.numType?this.form.type=2:"模块"!=this.form.numType&&3!=this.form.numType||(this.form.type=3),this.$refs[e].validate(function(e){e&&(n.dialogFormVisible=!1,t.i(i.b)(n.form).then(function(e){if(200==e.infoCode){n.$message({type:"success",message:"编辑成功"}),n.sendMsg(),n.dialogFormVisible=!1;var t=setTimeout(function(){n.positionFn(n.maoDian),clearInterval(t)},1e3)}else n.$message({type:"error",message:e.msg}),n.dialogFormVisible=!0}))})},showTr:function(e,n){var t=!e._parent||e._parent._expanded&&e._parent._show;return e._show=t,t?"":"display:none;"},toggle:function(e){var n=this,t=n.data[e];t._expanded=!t._expanded},spaceIconShow:function(e){return!(!this.treeStructure||0!==e)},toggleIconShow:function(e,n){return!!(this.treeStructure&&0===e&&n.children&&n.children.length>0)},handleDelete:function(e){var n=this;n.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(function(){var o=[];o.push(e),t.i(i.c)(o,e).then(function(t){200==t.infoCode?(n.tableData=n.tableData.filter(function(n){return n.id!=e}),n.stateMenu=!1,n.$message({type:"success",message:"删除成功!"})):204==t.infoCode?n.$message({type:"info",message:"请先删除子集菜单"}):n.$message({type:"info",message:"删除失败"})})})}}}},kfHR:function(e,n,t){e.exports={default:t("udC/"),__esModule:!0}},"udC/":function(e,n,t){t("kcXm"),t("6jzF"),e.exports=t("uedQ").Array.from}});