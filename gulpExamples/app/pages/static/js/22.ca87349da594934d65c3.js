webpackJsonp([22],{"3cXf":function(e,t,n){e.exports={default:n("Bdoc"),__esModule:!0}},"6ivr":function(e,t,n){var i=n("ovEB");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n("XkoO")("11c19456",i,!1)},Bdoc:function(e,t,n){var i=n("uedQ"),a=i.JSON||(i.JSON={stringify:JSON.stringify});e.exports=function(e){return a.stringify.apply(a,arguments)}},PLwr:function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container calendar-content-container"},[n("el-row",[n("el-col",{staticStyle:{"margin-top":"15px","padding-right":"10px"},attrs:{span:9}},[n("div",{staticClass:"scroll"},[n("el-tree",{ref:"mechanismTree",staticClass:"filter-tree",attrs:{data:e.treeData,"expand-on-click-node":!1,"filter-node-method":e.filterNode,props:e.defaultProps,"default-expand-all":"","highlight-current":"","node-key":"id"},on:{"node-click":e.getNodeData}},[n("span",{staticClass:"custom-tree-node",attrs:{"slot-scope":"{ node, data }"}},[n("span",[n("i",{staticClass:"icon icon-zuzhijigou"})])])])],1)]),e._v(" "),n("el-col",{staticStyle:{"margin-top":"15px"},attrs:{span:15}},[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"部门名称",prop:"name"}},[n("el-input",{attrs:{disabled:!0},model:{value:e.form.name,callback:function(t){e.form.name=t},expression:"form.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"上级名称",prop:"parentName"}},[n("el-input",{attrs:{disabled:!0},model:{value:e.form.parentName,callback:function(t){e.form.parentName=t},expression:"form.parentName"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"排序",prop:"orders"}},[n("el-input",{attrs:{disabled:!0},model:{value:e.form.orders,callback:function(t){e.form.orders=t},expression:"form.orders"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"更新时间",prop:"updateTime"}},[n("el-input",{attrs:{disabled:!0},model:{value:e.form.updateTime,callback:function(t){e.form.updateTime=t},expression:"form.updateTime"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"选择类型"}},[n("el-radio-group",{model:{value:e.form.type,callback:function(t){e.form.type=t},expression:"form.type"}},[n("el-radio",{attrs:{disabled:"",label:"单位"}}),e._v(" "),n("el-radio",{attrs:{disabled:"",label:"部门"}})],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"操作"}},[e.mechanismManager_btn_edit?e._e():n("el-button",{attrs:{size:"small",type:"success"},on:{click:function(t){e.handleUpdate(e.form)}}},[e._v("编辑")]),e._v(" "),e.mechanismManager_btn_del?e._e():n("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(t){e.handleDelete(e.form)}}},[e._v("删除")]),e._v(" "),e.mechanismManager_btn_add?e._e():n("el-button",{attrs:{size:"small",type:"success"},on:{click:function(t){e.handleCreate(e.form)}}},[e._v("添加")])],1)],1)],1)],1),e._v(" "),n("el-dialog",{attrs:{"close-on-click-modal":!1,title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[n("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"部门名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入部门名称"},model:{value:e.form.name,callback:function(t){e.form.name=t},expression:"form.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"排序",prop:"orders"}},[n("el-input",{attrs:{placeholder:"请输入排序"},model:{value:e.form.orders,callback:function(t){e.form.orders=t},expression:"form.orders"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"上级名称",prop:"parentName"}},[n("el-input",{attrs:{disabled:!0,placeholder:"请输入上级名称"},model:{value:e.form.parentName,callback:function(t){e.form.parentName=t},expression:"form.parentName"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"选择类型"}},[n("el-radio-group",{attrs:{prop:"type"},on:{change:e.changeDanEdit},model:{value:e.form.type,callback:function(t){e.form.type=t},expression:"form.type"}},[n("el-radio",{attrs:{label:"单位"}}),e._v(" "),n("el-radio",{attrs:{label:"部门"}})],1)],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",slot:"footer"},[n("el-button",{on:{click:function(t){e.cancel(e.form)}}},[e._v("取 消")]),e._v(" "),n("el-button",{on:{click:function(t){e.update("form")}}},[e._v("确 定")])],1)],1),e._v(" "),n("el-dialog",{attrs:{"close-on-click-modal":!1,title:e.textMap[e.dialogAddStatus],visible:e.dialogInfoVisible},on:{"update:visible":function(t){e.dialogInfoVisible=t}}},[n("el-form",{ref:"info",attrs:{model:e.info,rules:e.rules,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"部门名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入部门名称"},model:{value:e.info.name,callback:function(t){e.info.name=t},expression:"info.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"排序",prop:"orders"}},[n("el-input",{attrs:{placeholder:"请输入排序"},model:{value:e.info.orders,callback:function(t){e.info.orders=t},expression:"info.orders"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"上级名称",prop:"parentName"}},[n("el-input",{attrs:{disabled:!0,placeholder:"请输入上级名称"},model:{value:e.info.parentName,callback:function(t){e.info.parentName=t},expression:"info.parentName"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"选择类型"}},[n("el-radio-group",{attrs:{prop:"type"},on:{change:e.changeDan},model:{value:e.info.type,callback:function(t){e.info.type=t},expression:"info.type"}},[n("el-radio",{attrs:{label:"单位"}}),e._v(" "),n("el-radio",{attrs:{label:"部门"}})],1)],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",slot:"footer"},[n("el-button",{on:{click:function(t){e.cancelAdd("info")}}},[e._v("取 消")]),e._v(" "),n("el-button",{on:{click:function(t){e.create("info")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]},e.exports.render._withStripped=!0},T19Y:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("4YfN"),o=n.n(a),r=n("UFSV"),l=n("lQSI");t.default={data:function(){return{form:{id:void 0,name:void 0,parentName:void 0,parentId:void 0,type:void 0,orders:void 0,typeCode:void 0,valid:void 0},info:{id:void 0,name:void 0,parentName:void 0,parentId:void 0,type:"单位",typeCode:void 0,orders:void 0,valid:"1"},rules:{name:[{required:!0,pattern:/^[^ ]+$/,message:"请输入部门名称(部门名称不能为空)",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 10 个字符",trigger:"blur"}],parentName:[{required:!1,message:"请输入上级名称",trigger:"blur"}],resource:[{required:!0,trigger:"blur"}],orders:[{required:!0,message:"请输入排序",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 10 个字符",trigger:"blur"}],updateTime:[{required:!1,message:"请输入更新时间",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 10 个字符",trigger:"blur"}]},showElement:!1,str:"",warn:!0,dialogWarnVisible:!1,content:[],total:null,ids:[],treeData:[],defaultProps:{children:"childMenus",label:"name"},formEdit:!0,formStatus:"",dialogFormVisible:!1,dialogStatus:"",dialogInfoVisible:!1,dialogAddStatus:"",mechanismManager_btn_edit:!1,mechanismManager_btn_del:!1,mechanismManager_btn_add:!1,textMap:{update:"编辑",create:"创建"},tableKey:0,datemy:""}},created:function(){this.getTreeList()},computed:o()({},n.i(l.b)(["elements"])),methods:{changeDan:function(e){this.info.typeCode="单位"===e?0:1},changeDanEdit:function(e){this.form.typeCode="单位"===e?0:1},getTreeList:function(){var e=this;n.i(r.a)().then(function(t){e.treeData=t.data,console.log(t.data)})},filterNode:function(e,t){return!e||-1!==t.label.indexOf(e)},getNodeData:function(e){var t=this;console.log(e),this.formEdit||(this.formStatus="update"),n.i(r.b)(e.id).then(function(e){console.log(e.data),t.form=e.data,t.form.updateTime=t.dateFormat(t.form.updateTime)}),this.warn=!1,this.showElement=!0},handleCreate:function(e){var t=this;this.reset(),0==this.warn?n.i(r.b)(e.id).then(function(e){console.log(e),"1"==e.data.typeCode?t.$notify({title:"提示",message:"当前选择为部门,该操作不被允许",type:"warning",duration:2e3}):(t.info.parentId=e.data.id,t.info.parentName=e.data.name,t.dialogAddStatus="create",t.dialogInfoVisible=!0)}):this.$notify({title:"提示",message:"相应操作前请先点击选择部门",type:"warning",duration:2e3})},create:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;n.i(r.c)(t.info).then(function(e){1e3==e.infoCode?t.$notify({title:"失败",message:"部门名称已存在",type:"warning",duration:2e3}):(t.dialogInfoVisible=!1,t.resetTemp(),t.getTreeList(),t.$notify({title:"成功",message:"创建成功",type:"success",duration:2e3}))})})},checkspace:function(e){for(i=0;i<e.length;i++)str+=" ";return str==e},handleUpdate:function(e){var t=this;0==this.warn?(n.i(r.b)(e.id).then(function(e){console.log(e.data),t.form=e.data,t.form.id=t.form.id,t.form.orders=t.form.orders.toString()}),this.dialogFormVisible=!0,this.dialogStatus="update"):this.$notify({title:"提示",message:"相应操作前请先点击选择机构部门",type:"warning",duration:2e3})},update:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.dialogFormVisible=!1,n.i(r.d)(t.form).then(function(e){t.resetTemp(),t.dialogFormVisible=!1,300==e.infoCode?t.$notify({title:"失败",message:"部门名称已存在",type:"warning",duration:2e3}):(t.getTreeList(),t.$notify({title:"成功",message:"编辑成功",type:"success",duration:2e3}))})})},handleDelete:function(e){var t=this;0==this.warn?this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.ids.push(e.id),n.i(r.e)(t.ids).then(function(){t.getTreeList(),t.resetTemp(),t.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3});var n=t.content.indexOf(e);t.content.splice(n,1)})}):this.dialogWarnVisible=!0},dateFormat:function(e){if(null===e)return"";var t=e.split("T"),n=t[0],i=n.split("-"),a=t[1],o=a.split(".000"),r=o[0].split(":"),l=parseInt(i[0])+"/"+parseInt(i[1])+"/"+parseInt(i[2])+" "+parseInt(r[0])+":"+parseInt(r[1])+":"+parseInt(r[2]),s=new Date(Date.parse(l));return s.setTime(s.setHours(s.getHours()+8)),s.getFullYear()+"-"+(s.getMonth()+1<10?"0"+(s.getMonth()+1):s.getMonth()+1)+"-"+(s.getDate()<10?"0"+s.getDate():s.getDate())+" "+(s.getHours()<10?"0"+s.getHours():s.getHours())+":"+(s.getMinutes()<10?"0"+s.getMinutes():s.getMinutes())+":"+(s.getSeconds()<10?"0"+s.getSeconds():s.getSeconds())},cancel:function(e){var t=this;this.dialogFormVisible=!1,n.i(r.b)(e.id).then(function(e){t.form=e.data})},cancelAdd:function(e){this.dialogInfoVisible=!1},resetTemp:function(){this.ids=[],this.warn=!0,this.form={id:void 0,name:void 0,type:void 0,typeCode:void 0,orders:void 0,parentName:void 0,parentId:void 0,valid:void 0},this.info={id:void 0,name:void 0,orders:void 0,type:"单位",typeCode:"0",parentName:void 0,parentId:void 0,valid:"1"}},reset:function(){this.info={id:void 0,name:void 0,type:"单位",typeCode:"0",orders:void 0,parentName:void 0,parentId:void 0,valid:"1"}}}}},UFSV:function(e,t,n){"use strict";function i(e){return n.i(m.a)({url:c.b+"/department/save",method:"post",data:d()(e)})}function a(e){return n.i(m.a)({url:c.b+"/department/findById/"+e,method:"get"})}function o(e){return n.i(m.a)({url:c.b+"/department/delete",method:"delete",data:d()(e)})}function r(e){return n.i(m.a)({url:c.b+"/department/update",method:"post",data:d()(e)})}function l(){return n.i(m.a)({url:c.b+"/department/getTreeData",method:"get"})}t.c=i,t.b=a,t.e=o,t.d=r,t.a=l;var s=n("3cXf"),d=n.n(s),c=n("gyMJ"),m=n("Vo7i")},ovEB:function(e,t,n){t=e.exports=n("YfG4")(!1),t.push([e.i,"\n.custom-tree-node {\r\n  -webkit-box-flex: 1;\r\n      -ms-flex: 1;\r\n          flex: 1;\r\n  display: -webkit-box;\r\n  display: -ms-flexbox;\r\n  display: flex;\r\n  -webkit-box-align: center;\r\n      -ms-flex-align: center;\r\n          align-items: center;\r\n  -webkit-box-pack: justify;\r\n      -ms-flex-pack: justify;\r\n          justify-content: space-between;\r\n  font-size: 14px;\r\n  padding-right: 8px;\n}\n.warn {\r\n  text-align: center;\r\n  font-size: 20px;\n}\n.filter-tree {\r\n  height: 450px;\r\n  overflow-y: auto;\n}\n.scroll {\r\n  height: 450px;\r\n  width: 350px;\n}\r\n",""])},utf5:function(e,t,n){function i(e){a||n("6ivr")}var a=!1,o=n("Alxp")(n("T19Y"),n("PLwr"),i,null,null);o.options.__file="/Users/tiner/project/atkm/农业项目/web/web/src/views/admin/mechanism/index.vue",o.esModule&&Object.keys(o.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),o.options.functional&&console.error("[vue-loader] index.vue: functional components are not supported with templates, they should use render functions."),e.exports=o.exports}});